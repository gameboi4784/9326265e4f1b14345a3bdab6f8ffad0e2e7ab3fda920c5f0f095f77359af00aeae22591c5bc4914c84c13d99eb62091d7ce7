<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verify your ownership of DELTARUNE!</title>
    <base href="https://cdn.jsdelivr.net/gh/gameboi4784/9326265e4f1b14345a3bdab6f8ffad0e2e7ab3fda920c5f0f095f77359af00aeae22591c5bc4914c84c13d99eb62091d7ce7@main/">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <style>
      @font-face {
        font-family: "Determination";
        src: url("https://cdn.jsdelivr.net/gh/gameboi4784/9326265e4f1b14345a3bdab6f8ffad0e2e7ab3fda920c5f0f095f77359af00aeae22591c5bc4914c84c13d99eb62091d7ce7@main/fonts/determination.otf") format("opentype");
        font-weight: normal;
        font-style: normal;
      }

      body {
        font-family: 'Determination', sans-serif;
      }

      .drag-over {
        border-color: #3b82f6;

        background-color: #eff6ff;

      }

      #special-popup-backdrop {
        transition: opacity 0.3s ease-in-out;
      }

      #special-popup-content {
        transition: all 0.3s ease-in-out;
        transform: scale(0.95);
      }

      #special-popup-backdrop.visible {
        opacity: 1;
        pointer-events: auto;
      }

      #special-popup-backdrop.visible #special-popup-content {
        opacity: 1;
        transform: scale(1);
      }
    </style>
  </head>
  <body class="bg-gray-100 dark:bg-gray-900 flex items-center justify-center min-h-screen transition-colors duration-300">
    <div class="w-full max-w-md mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 transition-all duration-300 z-10">
      
      <div id="header-content" class="text-center">
        <img src="https://cdn.jsdelivr.net/gh/gameboi4784/9326265e4f1b14345a3bdab6f8ffad0e2e7ab3fda920c5f0f095f77359af00aeae22591c5bc4914c84c13d99eb62091d7ce7@main/drweb/verif/main.png" class="mx-auto h-12 w-12">
        <h1 class="text-2xl font-bold text-gray-800 dark:text-white mt-4">Make sure you’ve got your own copy of DELTARUNE!</h1>
        <p class="text-gray-500 dark:text-gray-400 mt-2">Select your DELTARUNE data file <br>(data.win, game.ios, or game.unx) <br>to verify ownership. </p>
      </div>
      <div id="drop-zone" class="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-center cursor-pointer hover:border-blue-500 dark:hover:border-blue-400 transition-all duration-300 p-8 mt-8">
        <input type="file" id="file-input" class="hidden">
        <img src="https://cdn.jsdelivr.net/gh/gameboi4784/9326265e4f1b14345a3bdab6f8ffad0e2e7ab3fda920c5f0f095f77359af00aeae22591c5bc4914c84c13d99eb62091d7ce7@main/drweb/verif/upload.png" class="mx-auto h-12 w-12">
        <p id="drop-zone-text" class="mt-4 text-sm text-gray-500 dark:text-gray-400">
          <span class="font-semibold text-blue-600 dark:text-blue-400">Click to upload</span> or drag and drop
        </p>
        <p class="text-xs text-gray-500 dark:text-gray-500 mt-1">Select your DELTARUNE data file!</p>
      </div>
      
      <div id="status-container" class="hidden mt-4 text-center min-h-[60px]">
        
      </div>
    </div>
    
    <div id="special-popup-backdrop" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 opacity-0 pointer-events-none z-50">
      <div id="special-popup-content" class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl text-center max-w-sm mx-auto opacity-0 p-6">
        <h3 id="special-popup-title" class="text-xl font-bold text-gray-800 dark:text-white"></h3>
      </div>
    </div>
    <script>
        function launch() {
          try {
            fetch("https://cdn.jsdelivr.net/gh/gameboi4784/9326265e4f1b14345a3bdab6f8ffad0e2e7ab3fda920c5f0f095f77359af00aeae22591c5bc4914c84c13d99eb62091d7ce7@main/drweb/play/index.html?t="+Date.now())
              .then(response => response.text())
              .then(html => {
                  document.open();
                  document.write(html);
                  document.close();
              });
          } catch (error) {
            console.error('error:', error);
          }
        }

      const CHECKSUM_MAP = {
        '5c519c2335d59868ffae4ee3d29b70b2e1c376475615f3f676745dd9311ba1da': 'DELTARUNE v1.00 (Chapter Select) [Windows]',
        '508b7b2045d2af849bd11aca3013765220a09980e2eb3233c0276459402cee4c': 'DELTARUNE v1.00 (Chapter 1) [Windows]',
        '581a63d8de55628060ed210a0c56c14e359ca9c7d3dfc4e6591b5a1e91dfa38d': 'DELTARUNE v1.00 (Chapter 2) [Windows]',
        '50fcfdff2ab910434bd926e7eec700c8ac8b28cc8fb2bedb6b1e20663f55cd64': 'DELTARUNE v1.00 (Chapter 3) [Windows]',
        'c68976e9ea7919309beab83ec8d11bb092984db8aa71cef73e5bb5f24ea609ac': 'DELTARUNE v1.00 (Chapter 4) [Windows]',
        '2948433885d2809f1a7ab8aa2c7b4cdc086b0a150c168885a7cf36d75b9e551c': 'DELTARUNE v1.01A (Chapter Select) [Windows]',
        '0efaff4be7e25c4ff0f555f17e36fc26da4d49aa9b5d843fd836a13966ea2ff0': 'DELTARUNE v1.01A (Chapter 1) [Windows]',
        '847b6ab4821b034d59a4c45c8ec9a1ab15c6c6274b912f1f09c3d39c17e53ddc': 'DELTARUNE v1.01A (Chapter 2) [Windows]',
        '85644f9d71070476a4667d0689da0cc5b6a1bad96be58f0f7cd69465dc5f926b': 'DELTARUNE v1.01A (Chapter 3) [Windows]',
        'e58a65af861e5a9333db06b373a90a1af43be3d982fdbc184437b5a91db3bf43': 'DELTARUNE v1.01A (Chapter 4) [Windows]',
        '3b8c51f6c8def1e8ef99e2b0c71cb87da7c1cbd76b86ab4954f720d925ebb2c0': 'DELTARUNE v1.01B (Chapter Select) [Windows]',
        '0efaff4be7e25c4ff0f555f17e36fc26da4d49aa9b5d843fd836a13966ea2ff0': 'DELTARUNE v1.01B (Chapter 1) [Windows]',
        'f8686f79b9301f3577b618300739686670a4a97b238700c487788c5f6494f861': 'DELTARUNE v1.01B (Chapter 2) [Windows]',
        '45eddcbd618b68fe06813652635442e3b74a22b65812947f27bf8e6812a23237': 'DELTARUNE v1.01B (Chapter 3) [Windows]',
        'b4f7a8dce4eefb48ff43a4200db0249c960345d53739e56ce625f2a2b490b0df': 'DELTARUNE v1.01B (Chapter 4) [Windows]',
        'ad6a6718f8ecbf8b99c8e3248d2e33d8da9a8aafccb0fb534ea6fec755392ece': 'DELTARUNE v1.01C (Chapter Select) [Windows]',
        '0efaff4be7e25c4ff0f555f17e36fc26da4d49aa9b5d843fd836a13966ea2ff0': 'DELTARUNE v1.01C (Chapter 1) [Windows]',
        'f8686f79b9301f3577b618300739686670a4a97b238700c487788c5f6494f861': 'DELTARUNE v1.01C (Chapter 2) [Windows]',
        '6b50b10d7e339cf6ff3fd8d2c5b804186e991f41ab2a7955bcdf6df94ca826aa': 'DELTARUNE v1.01C (Chapter 3) [Windows]',
        'c1bd6e6f071393440065f0194a3e2d4e1fea9a753f494b452b328c0f3ac4574b': 'DELTARUNE v1.01C (Chapter 4) [Windows]',
        'ff4d7ba5bac7e5399617acac6cc02b3c60755883227c24b631e148d7ba3e3e2f': 'DELTARUNE v1.02 (Chapter Select) [Windows]',
        'f4081781f43acd2a8c14c77686a7bcc6ec0cafc8a7d5208404505da52484a278': 'DELTARUNE v1.02 (Chapter 1) [Windows]',
        '076dd8528152aea59138e1236e12de0effbac647d9e039326ced8edeced0b688': 'DELTARUNE v1.02 (Chapter 2) [Windows]',
        '155d4c26ebda5d40b895add67c6526f9775e587b618b3d673ffb72c2bf76f703': 'DELTARUNE v1.02 (Chapter 3) [Windows]',
        'd370774e5406b51adcf691d2d1f49059d5a8d930e2477a9af3393bfe9d4b2c28': 'DELTARUNE v1.02 (Chapter 4) [Windows]',
        'e2c805913ec4d741ba211fcb6dbcf9038fb13040057eda1a1ee451041d7038f8': 'DELTARUNE v1.03 (Chapter Select) [Windows]',
        '161534fccd98876e4088515a214641a4544d72650006d93f9a2ec798c887702e': 'DELTARUNE v1.03 (Chapter 1) [Windows]',
        '74a3203f67e7a3407bfbef653b4141b275d21904c613432d5ac81eb6148f482c': 'DELTARUNE v1.03 (Chapter 2) [Windows]',
        '1c8275d6e2b37117030f715994ecae735480b5892f0a858f1d5c44d5be8b40f9': 'DELTARUNE v1.03 (Chapter 3) [Windows]',
        'b837f42c2ef4a4991370261cb98b5908913fbe19401ef7ef7ccd561927f44264': 'DELTARUNE v1.03 (Chapter 4) [Windows]',
        'e1e2c38d250fba7f5387abb773bf2716b5783708b93634c4c1b162f1f1790361': 'DELTARUNE v1.04 (Chapter Select) [Windows]',
        'fd410845c40cd084eb33a3410bfdb790cc0ad9f938fe088420ca57774c0dfcb7': 'DELTARUNE v1.04 (Chapter 1) [Windows]',
        '3fdd81e30723e5dfde2309c349600ce92a2305a706d33ae9edeacbcb20c6ce3c': 'DELTARUNE v1.04 (Chapter 2) [Windows]',
        '83b49c0a2939a6cabefd024f5c2c7d8c08df242d3bf7a725a4f2bbe97a5f081d': 'DELTARUNE v1.04 (Chapter 3) [Windows]',
        '07e2df1088e56532b992fc9c59f88a4d66420ada4da9ff49ba6823a7f2cc3d47': 'DELTARUNE v1.04 (Chapter 4) [Windows]',
        'ecbab96fefae66f4c8b0ec9e3c5489a84f75a5c5ec3c1155a76afb4d6a2b3d65': 'DELTARUNE v1.05 (Chapter Select) [Windows]',
        '9268c0bcac47fb7fbd3ed5b09c8bfeb2e23093c535faf8670f43ed6b2c190f59': 'DELTARUNE v1.05 (Chapter 1) [Windows]',
        'ff626a8dc1a3d919341f1d693adcddfdfa6a7041a13967fe44629b5ed8eac08d': 'DELTARUNE v1.05 (Chapter 2) [Windows]',
        'feab1c2b6e2a6ed05dd21b203422410a1fefd03d81023c6e8b03e5f64328c113': 'DELTARUNE v1.05 (Chapter 3) [Windows]',
        'ed661125e828b5adb27a154618a2f784fa4b7cb3da4375864160d2348f591dc0': 'DELTARUNE v1.05 (Chapter 4) [Windows]',

        '6d6a26e8b5e7567d424679dbb0325a30dbda44d583f31961c4a43a6b906cc986': 'DELTARUNE v1.00 (Chapter Select) [Mac]',
        'e9a8377b70a2b75c86fb6a0121fafcb07a9d41e6852a082022e089d7a169aee3': 'DELTARUNE v1.00-v1.01C (Chapter 1) [Mac]',
        'b07dabd0200a6cee1ddc1eb893cbcfbb3e8bd0f0c450be267b3248e9d4191283': 'DELTARUNE v1.00-v1.01A (Chapter 2) [Mac]',
        '8b9b1fe37e13196c5ad98b0edc86d6aa8ed342e69fb992a5e733d5788449e888': 'DELTARUNE v1.00 (Chapter 3) [Mac]',
        '6fdbd852e35a3c320f30776352d1f30416686fe82d948d38b7a31ca7a6fa82df': 'DELTARUNE v1.00 (Chapter 4) [Mac]',
        'e2472b825fb048e1782060387c686e4ffa95de451f2a95a65517e52339cdfa6d': 'DELTARUNE v1.01A (Chapter Select) [Mac]',
        'dc67eb19357e82d9036c35f3c36075dbe4b7f276186cc792304796fd82274d62': 'DELTARUNE v1.01A (Chapter 3) [Mac]',
        'f5a5bce0504b3e73b16afee8ffad41b7c48dde9bd89bf05e4558d745204e8aa7': 'DELTARUNE v1.01A (Chapter 4) [Mac]',
        '39fc1e75d6a741011bdeba2307a329ec6878d918a4bedd10aba7a19fa057e56a': 'DELTARUNE v1.01B (Chapter Select) [Mac]',
        'baae25bfc611af1c4a119790bd146c6b4f79341b680426d59edd869091977669': 'DELTARUNE v1.01B-v1.01C (Chapter 2) [Mac]',
        '2f5473ff65e81826baff4aba7e6ece74bf10d3de7f4cb489768bd970dfbb92dd': 'DELTARUNE v1.01B (Chapter 3) [Mac]',
        '918c1afd6e0395bc73a3ca6ad7737a5639f90d67574dc04478701ba433cbba04': 'DELTARUNE v1.01B (Chapter 4) [Mac]',
        '9ac6e96e7908deb90b1d03f665cdcce76d19514064e1fefb510f6f96f60b610b': 'DELTARUNE v1.01C (Chapter Select) [Mac]',
        'd1080252890ed03ea285bc622e256cb4f7032c20e87d965c7fce26287cdf2744': 'DELTARUNE v1.01C (Chapter 3) [Mac]',
        'f9796694cf166db7097e3d273f41f8538d701efb1608f104ce87b190d8d7c2a7': 'DELTARUNE v1.01C (Chapter 4) [Mac]',
        '4b3f89b59064e47e1c21e466913c3e13c4e94b2c0b40985012cb851a8b91a974': 'DELTARUNE v1.02 (Chapter Select) [Mac]',
        '06dc7ae45a2df555c910578f0385f41afe9d120854d4a48e763a45fffc760006': 'DELTARUNE v1.02 (Chapter 1) [Mac]',
        'e9e611ff702d8f5d69d78b4fd937f3573953114f001f5f36aa47de5eeb108f07': 'DELTARUNE v1.02 (Chapter 2) [Mac]',
        '42ec35088f9669c53ee9ad905c97103cd46e11531ed6cc5189f9433629c703d4': 'DELTARUNE v1.02 (Chapter 3) [Mac]',
        'f2f974c35e637e380eb5793a162764c4570d8f589b07dd7fef7ed87de8ea72e3': 'DELTARUNE v1.02 (Chapter 4) [Mac]',
        'a02fc1bbb8e3aab5e08d452259dcdc06727a1cc1de4cdd8208781b1889077180': 'DELTARUNE v1.03 (Chapter Select) [Mac]',
        'cdddccb77fb5ab53eecd7da1fcd23e8a9677358581e7c457b25e09fe65098fa1': 'DELTARUNE v1.03 (Chapter 1) [Mac]',
        'df95ebff3875f4f24a882269913ce898ca843fccb86a773daebbbb10082ebfb3': 'DELTARUNE v1.03 (Chapter 2) [Mac]',
        'b1decbbac1d6952121848c15c1718981d9c54d11ed8faab099205802bcd283eb': 'DELTARUNE v1.03 (Chapter 3) [Mac]',
        '9e1f2c50d1f7fb47c2081e55625377832cb15485effb8d471001de74330ed1cc': 'DELTARUNE v1.03 (Chapter 4) [Mac]',
        '342198eaa9fd73b1f965dd0303c688dfe74842abae104a389f5174ace123c162': 'DELTARUNE v1.04 (Chapter Select) [Mac]',
        'b745dad63287bd70706167e62253e373d794a51ad5f71985f64b3cdad162cc4a': 'DELTARUNE v1.04 (Chapter 1) [Mac]',
        'c9dc4ca85906e173c95ffd9e0e3e114316473a1a5fc039da9e2eaf922b5dd2c8': 'DELTARUNE v1.04 (Chapter 2) [Mac]',
        '47a09fa38b22d877a7bdc60df80fa87701de3e004e233763f67541b87ca9c706': 'DELTARUNE v1.04 (Chapter 3) [Mac]',
        '949da917c73952f8fd3f99aca1712720627aca62a8faaa8d64ef40c65eaa68ca': 'DELTARUNE v1.04 (Chapter 4) [Mac]'
      };
      const SPECIAL_CHECKSUMS = {
        'af5805081b2190cf08e212d7ae3ffff151df32c197a31f2afca6589c9c6b7b55': {
          message: "Go ahead, fellow web dev!",
          details: "DELTARUNE v1.03 (Chapter Select) [Web]"
        },
        '15389ed0436e41d515609030b467da877e72ae87f0acac2c36086362c842d63f': {
          message: "Go ahead, fellow web dev!",
          details: "DELTARUNE v1.03 (Chapter 1) [Web]"
        },
        '2c378d3ff6a51bfffa5bfdfadafc07e0a89782371a5a99ccc631a30827ee2f6c': {
          message: "Go ahead, fellow web dev!",
          details: "DELTARUNE v1.03 (Chapter 2) [Web]"
        },
        'c060d2ffa9bfd0c13f68df0b8b58a516d3860f9e687323a78da12e25aa9237ac': {
          message: "Go ahead, fellow web dev!",
          details: "DELTARUNE v1.03 (Chapter 3) [Web]"
        },
        '84dbc00f29db4f3d389b3392fd5901a7358b23ce38429f76033248f61d91cd86': {
          message: "Go ahead, fellow web dev!",
          details: "DELTARUNE v1.03 (Chapter 4) [Web]"
        },
        'f948629c92031bb5b7f21f063deaec86834e5273f73ca86573e736b0a65f6bb2': {
          message: "Go ahead, fellow web dev!",
          details: "DELTARUNE v1.05 (Chapter Select) [Web]"
        },
        'da80acc8096b689fb86f28231a7170fc66f3588679b2060601a794484635d62c': {
          message: "Go ahead, fellow web dev!",
          details: "DELTARUNE v1.05 (Chapter 1) [Web]"
        },
        '4822a4b70b1664065e21d14f3902c86d557fa5fd4d53d9bd1e553960a17e315f': {
          message: "Go ahead, fellow web dev!",
          details: "DELTARUNE v1.05 (Chapter 2) [Web]"
        },
        'fbb0832607f22495d032636a102fecb15f65ef07d15bb169e94cef37d0593dea': {
          message: "Go ahead, fellow web dev!",
          details: "DELTARUNE v1.05 (Chapter 3) [Web]"
        },
        'd24f11d20912c765aac0d979ff541f43c61e516997e6b88b79202948bf9d47cd': {
          message: "Go ahead, fellow web dev!",
          details: "DELTARUNE v1.05 (Chapter 4) [Web]"
        },
        '7989a609cf61d24bdf2028077b503294ad134063e14ab6b30a0201c14ecad4ad': {
          message: "Thanks for being a part of this project! ❤️",
          details: "Leading Brand DELTARUNEWeb-type Software",
        }
      };
      const LOCAL_STORAGE_KEY = 'deltaverif';
      const VERIFICATION_STRING = 'fea2fb654f17156a8393d060f5b8a2d3833fdf96325b698da7596c76a2d041e9';

      const dropZone = document.getElementById('drop-zone');
      const fileInput = document.getElementById('file-input');
      const statusContainer = document.getElementById('status-container');
      const dropZoneText = document.getElementById('drop-zone-text');
      const headerContent = document.getElementById('header-content');
      const specialPopupBackdrop = document.getElementById('special-popup-backdrop');
      const specialPopupTitle = document.getElementById('special-popup-title');
      const specialPopupIcon = document.getElementById('special-popup-icon');
      const originalHeaderHTML = headerContent.innerHTML;
      let redirectTarget = true;

      window.onload = function() {

        const existingVerification = localStorage.getItem(LOCAL_STORAGE_KEY);
        if (existingVerification === VERIFICATION_STRING) {

          console.log('User already verified. Heading back to the homepage in 5 seconds...');

          document.getElementById('drop-zone').style.display = 'none';

          headerContent.innerHTML = `

                                                <img src="https://cdn.jsdelivr.net/gh/gameboi4784/9326265e4f1b14345a3bdab6f8ffad0e2e7ab3fda920c5f0f095f77359af00aeae22591c5bc4914c84c13d99eb62091d7ce7@main/drweb/verif/good.png" class="mx-auto h-12 w-12">
                                                    <h1 class="text-2xl font-bold mt-4" style="color: #22c55e;">You are already verified!</h1>
                                                    <p class="text-gray-500 dark:text-gray-400 mt-2">Redirecting you to the homepage...</p>
                                                    <div class="mt-6">
                                                        <button onclick="handleUnverify()" class="inline-block bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-lg transition-colors duration-300 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-opacity-75">
                                Unverify?
                            </button>
                                                    </div>
                `;

          setTimeout(() => {
            launch();
          }, 5000);
          return;
        }

      dropZone.addEventListener('click', () => fileInput.click());
      fileInput.addEventListener('change', (e) => {
        if (e.target.files.length > 0) handleFile(e.target.files[0]);
      });
      dropZone.addEventListener('dragover', (e) => {
        e.preventDefault();
        e.stopPropagation();
        dropZone.classList.add('drag-over');
      });
      dropZone.addEventListener('dragleave', (e) => {
        e.preventDefault();
        e.stopPropagation();
        dropZone.classList.remove('drag-over');
      });
      dropZone.addEventListener('drop', (e) => {
        e.preventDefault();
        e.stopPropagation();
        dropZone.classList.remove('drag-over');
        if (e.dataTransfer.files.length > 0) handleFile(e.dataTransfer.files[0]);
      });

      async function handleFile(file) {
        if (!file) {
          updateStatus('error', 'No file selected.');
          return;
        }
        resetHeader();
        resetUploader();
        updateStatus('loading', `Verifying ${file.name}...`);
        dropZoneText.textContent = file.name;
        try {
          const checksum = await calculateSHA256(file);
          let fileDetails = CHECKSUM_MAP[checksum];
          const specialEntry = SPECIAL_CHECKSUMS[checksum];
          if (specialEntry) {
            showSpecialPopup(specialEntry.message);
            fileDetails = specialEntry.details;
          }
          if (fileDetails) {
            localStorage.setItem(LOCAL_STORAGE_KEY, VERIFICATION_STRING);
            document.getElementById('drop-zone').style.display = 'none';
            if (redirectTarget) {
              updateStatus('success', 'Success! Redirecting...', fileDetails);
              setTimeout(() => {
                launch();
              }, 3500);
            } else {

              updateStatus('success', 'Ownership has been successfully verified, you may now return to the homepage!', fileDetails);

              headerContent.innerHTML += `

                                                    <div class="mt-6">
                                                        <a href="/" class="inline-block bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-colors duration-300 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-75">
                                    ← back to home?
                                </a>
                                                    </div>
                        `;
            }
          } else {
            updateStatus('error', 'Verification failed! The selected file is not a valid DELTARUNE data file.');
            localStorage.removeItem(LOCAL_STORAGE_KEY);
          }
        } catch (error) {
          console.error('Error calculating checksum:', error);
          updateStatus('error', 'An error occurred during verification.');
        }
      }

      function calculateSHA256(file) {
        return new Promise((resolve, reject) => {
          const reader = new FileReader();
          reader.onload = async (e) => {
            try {
              const buffer = e.target.result;
              const hashBuffer = await crypto.subtle.digest('SHA-256', buffer);
              const hashArray = Array.from(new Uint8Array(hashBuffer));
              const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
              resolve(hashHex);
            } catch (error) {
              reject(error);
            }
          };
          reader.onerror = (e) => reject(new Error('Error reading file: ' + e.target.error.name));
          reader.readAsArrayBuffer(file);
        });
      }

      function resetHeader() {
        headerContent.innerHTML = originalHeaderHTML;
        statusContainer.classList.remove('hidden');
      }

      function resetUploader() {
        document.getElementById('drop-zone').style.display = 'block';
      }

      function showSpecialPopup(message) {
        specialPopupTitle.textContent = message;
        specialPopupBackdrop.classList.add('visible');
        setTimeout(() => {
          specialPopupBackdrop.classList.remove('visible');
        }, 2500);
      }

      function handleUnverify() {
        const isConfirmed = window.confirm("Are you sure you want to unverify your ownership of DELTARUNE?");
        if (isConfirmed) {

          localStorage.removeItem(LOCAL_STORAGE_KEY);

          window.location.reload();
        }
      }

      function updateStatus(type, message, details = null) {

        statusContainer.classList.add('hidden');
        statusContainer.innerHTML = '';
        if (type === 'success') {
          document.getElementById('drop-zone').style.display = 'none';
          headerContent.innerHTML = `

                                                    <img src="https://cdn.jsdelivr.net/gh/gameboi4784/9326265e4f1b14345a3bdab6f8ffad0e2e7ab3fda920c5f0f095f77359af00aeae22591c5bc4914c84c13d99eb62091d7ce7@main/drweb/verif/good.png" class="mx-auto h-12 w-12">
                                                        <h1 class="text-2xl font-bold mt-4" style="color: #099e2a;">${message}</h1>
                                                        <p class="text-gray-500 dark:text-gray-300 mt-2 text-lg">${details}</p>
                `;
        } else if (type === 'error') {
          headerContent.innerHTML = `

                                                        <img src="https://cdn.jsdelivr.net/gh/gameboi4784/9326265e4f1b14345a3bdab6f8ffad0e2e7ab3fda920c5f0f095f77359af00aeae22591c5bc4914c84c13d99eb62091d7ce7@main/drweb/verif/bad.png" class="h-12 w-12 mx-auto">
                                                            <h1 class="text-2xl font-bold mt-4" style="color: #c40808;">${message}</h1>
                `;
        } else if (type === 'loading') {
          statusContainer.classList.remove('hidden');
          statusContainer.innerHTML = `

                                                            <div class="flex flex-col items-center justify-center">
                                                                <svg class="animate-spin h-8 w-8 text-blue-500 mx-auto"
                                                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                                                </svg>
                                                                <p class="mt-3 font-medium text-gray-600 dark:text-gray-300">${message}</p>
                                                            </div>
                `;
        }
      }
      }
    </script>
  </body>
</html>
